# Python CI с pytest (GitHub Actions)

Этот репозиторий использует GitHub Actions для автоматизации сборки и тестирования Python-проекта.

## Как работает CI

Пайплайн (`config.yml`) автоматически запускается в двух случаях:
1. При добавлении изменений в ветку `main` (через `push`).
2. При создании/обновлении pull request в ветку `main`.

### Структура пайплайна

Пайплайн состоит из двух джоб:

#### Джоб `build-and-test`
- **Цель:** проверка работоспособности кода на разных ОС и версиях Python.
- **Триггеры:** `push` и `pull_request` в ветку `main`.
- **Окружения:** Ubuntu, Windows, macOS.
- **Версии Python:** 3.9, 3.10, 3.11.
- **Шаги:**
  1. Клонирование репозитория (`actions/checkout@v4`).
  2. Установка Python (`actions/setup-python@v5`).
  3. Обновление pip.
  4. Запуск юнит-тестов (`python -m unittest test_main.py`).


#### Джоб `deploy`
- **Цель:** развернуть статическую HTML‑страницу на GitHub Pages с выводом скрипта `main.py`.
- **Триггер:** только `push` в ветку `main` (проверяется через условие `github.ref`).
- **Окружение:** Ubuntu (`ubuntu-latest`).
- **Условие запуска:** успешное завершение джоба `build-and-test` (указано через `needs`).
- **Шаги:**
  1. **Клонирование репозитория** — `actions/checkout@v4` (повторное клонирование для джоба `deploy`).
  2. **Формирование HTML‑страницы** — команда:  
     ```bash
     echo "<h1>$(python main.py)</h1>" > index.html
     ```  
     Результат: файл `index.html` с выводом скрипта в заголовке `<h1>`.
  3. **Деплой на GitHub Pages** — `peaceiris/actions-gh-pages@v3` (использует `secrets.GITHUB_TOKEN` для доступа к репозиторию).
- **Результат:** страница доступна по адресу `https://Mag1sterLudi.github.io/HomeWork1/`.


### Зависимости между джобами
Джоб `deploy` зависит от `build-and-test`. Деплой начинается только после успешного прохождения всех тестов.

### Матрица тестирования

Тесты выполняются параллельно на **9 комбинациях** ОС и версий Python:
- **ОС**: `ubuntu-latest`, `windows-latest`, `macos-latest`.
- **Версии Python**: `3.9`, `3.10`, `3.11`.

### Результаты тестов

После завершения джобы можно:
- Посмотреть статус тестов в разделе **Actions** на GitHub.
- Убедиться, что все комбинации ОС/Python прошли тесты успешно.
- При ошибках — изучить логи для отладки.

### Требования

Для работы пайплайна необходимы:
- Файл `requirements.txt` с зависимостями проекта.
- Тесты, написанные с использованием `pytest`.
- Код, размещённый в ветке `main`.

### Как проверить пайплайн

1. Внесите изменения в код и сделайте `push` в `main`.
2. Перейдите в раздел **Actions** на GitHub.
3. Дождитесь завершения джобы и проверьте результаты.

### Пример вывода тестов

Если тесты прошли успешно, в логах будет видно:

- Build and Test (ubuntu-latest, python=3.9) — 43s

- Build and Test (windows-latest, python=3.10) — 38s

Если тесты упали — проверьте логи для конкретной ОС/версии Python.

SF и MIFI, спасибо за внимание!

